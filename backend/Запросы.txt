query	{
  ticketList(filters: {limit: 9999, offset: 0, orderBy: "lastMsgDate", orderDir: "ASC", clientCountries: ["russia", "china"]}){
    id
    unit
    theme
    subTheme
    date
    lastMessage{
      date
    }
    helper{
      id
      user{
        country
      }
    }
    client{
      id
      user{
        country
      }
    }
  }
}

mutation{
  addHelperUser(fullName: "hyt", country: "dfgdf", login: "sdfsdf", password: "sdfgdf")
}

SELECT tickets.id, tickets.clientId, tickets.helperId, users.country
FROM tickets
JOIN users ON tickets.clientId = users.id OR tickets.helperId = users.id

SELECT tickets.id, tickets.clientId, tickets.helperId, users.country AS client_id, helps.country AS helper_id
FROM tickets
JOIN users ON tickets.clientId = users.id
JOIN users AS helps ON tickets.helperId = helps.id

CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT,
    fullName VARCHAR(255) NOT NULL,
    role VARCHAR(255) NOT NULL,
    country VARCHAR(255) NOT NULL,
    PRIMARY KEY (id)
)  ENGINE=INNODB;

INSERT INTO users (id, fullName, role, country) VALUES (NULL, 'sanya', 'client', 'russia');
INSERT INTO users (id, fullName, role, country) VALUES (NULL, 'misha', 'helper', 'africa');
INSERT INTO users (id, fullName, role, country) VALUES (NULL, 'lesha', 'helper', 'poland');
INSERT INTO users (id, fullName, role, country) VALUES (NULL, 'kostya', 'client', 'china');

CREATE TABLE IF NOT EXISTS clients(
    id INT NOT NULL,
    phone VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    PRIMARY KEY (id)
)  ENGINE=INNODB;

INSERT INTO clients (id, phone, email) VALUES (1, '79999999999', 'test@test.ru');
INSERT INTO clients (id, phone, email) VALUES (4, '71111111111', 'vertera@vertera.ru');

CREATE TABLE IF NOT EXISTS helpers(
    id INT NOT NULL,
    login VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    PRIMARY KEY (id)
)  ENGINE=INNODB;

INSERT INTO users (id, name, role, country) VALUES (NULL, 'sanya', 'client', 'russia');

CREATE TABLE IF NOT EXISTS tickets(
    id INT AUTO_INCREMENT,
    clientId INT NOT NULL,
    helperId INT NOT NULL,
    status VARCHAR(255) NOT NULL,
    date DATETIME NOT NULL,
    unit VARCHAR(255) NOT NULL,
    theme VARCHAR(255) NOT NULL,
    subTheme VARCHAR(255),
    reaction VARCHAR(255),
    PRIMARY KEY (id)
)  ENGINE=INNODB;

CREATE TABLE IF NOT EXISTS messages(
    id INT AUTO_INCREMENT,
    senderId INT NOT NULL,
    recieverId INT NOT NULL,
    attachmentId INT,
    ticketId INT NOT NULL,
    type VARCHAR(255) NOT NULL,
    readed BOOL NOT NULL,
    text VARCHAR(255),
    date DATETIME NOT NULL,
    PRIMARY KEY (id)
)  ENGINE=INNODB;

CREATE TABLE IF NOT EXISTS attachments(
    id INT AUTO_INCREMENT,
    path VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    PRIMARY KEY (id)
)  ENGINE=INNODB;